:root{
  --bg:#0e1117; --card:#111826; --ink:#e6e7eb; --muted:#9aa3ae;
  --brand:#22c55e; --accent:#60a5fa; --ghost:#1f2736;
  --flip-speed:700ms;
}
:root.light{ --bg:#fff; --card:#f7f8fb; --ink:#0e1117; --muted:#465062; --ghost:#e5e7eb; }

*{box-sizing:border-box} html,body{margin:0}
body{font:15.75px/1.55 Inter,system-ui,Segoe UI,Roboto;color:var(--ink);background:var(--bg)}
.wrap{max-width:1100px;margin:1.5rem auto;padding:0 1rem}

.site{display:flex;justify-content:space-between;align-items:center;padding:.8rem 1rem;border-bottom:1px solid var(--ghost);background:var(--card)}
.site h1{font-size:1.05rem;margin:0}
nav{display:flex;gap:.6rem;align-items:center}
.cart{display:flex;gap:.35rem;align-items:center}
.badge{min-width:1.6rem;height:1.4rem;border-radius:999px;background:var(--ghost);display:grid;place-items:center;transition:transform .18s ease}

/* NEW: slot chip */
.slotbar{display:flex;gap:.35rem;align-items:center}
.chip{padding:.1rem .5rem;border-radius:999px;border:1px solid var(--ghost);background:transparent}

.card{background:var(--card);border:1px solid var(--ghost);border-radius:12px;padding:1rem;margin:1rem 0;box-shadow:0 10px 30px rgba(0,0,0,.15)}
.panel{background:transparent;border:1px dashed var(--ghost);border-radius:12px;padding:1rem}
.grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
.grid2{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}
.row{display:flex;gap:.6rem;align-items:center;flex-wrap:wrap}
.hint{color:var(--muted);font-size:.88rem}

.btn{border:1px solid var(--ghost);background:transparent;color:inherit;padding:.5rem .8rem;border-radius:10px;transition:transform .15s, background-color .2s, border-color .2s}
.btn:hover,.btn:focus{transform:translateY(-1px);border-color:var(--accent)}
.btn.primary{background:var(--brand);color:#08110a;border-color:transparent}
.btn.ghost{opacity:.9}
.icon{border:none;background:transparent;color:inherit}

.product__media{width:100%;height:160px;perspective:1000px}
.flip{position:relative}
.flip .face{
  position:absolute; inset:0; display:grid; place-items:center; border-radius:12px;
  border:1px solid var(--ghost); background:#0b1423; backface-visibility:hidden; transform-style:preserve-3d;
  transition:transform var(--flip-speed) ease;
}
.flip .back{transform:rotateY(180deg); background:#0e1930; color:#cbd4e1}
.flip.active .front{transform:rotateY(180deg)}
.flip.active .back{transform:rotateY(360deg)}

.order label{display:block}
.order input{width:100%;padding:.55rem;border:1px solid var(--ghost);border-radius:10px;background:transparent;color:inherit}
.spinner{
  width:22px;height:22px;border:3px solid var(--ghost);border-top-color:var(--accent);border-radius:50%;
  animation:spin .7s linear infinite;
}
@keyframes spin{to{transform:rotate(1turn)}}

.toast{
  position:fixed;right:16px;bottom:16px;background:#0b1423;border:1px solid var(--ghost);
  padding:.5rem .75rem;border-radius:10px;box-shadow:0 8px 28px rgba(0,0,0,.35)
}

/* Backdrops: hidden must not block page */
.backdrop{
  position:fixed; inset:0; display:grid; place-items:center;
  background:#0008; opacity:0; pointer-events:none; z-index:999;
}
.backdrop.show{ animation:fadeIn .2s ease forwards; pointer-events:auto; }
.backdrop.hide{ animation:fadeOut .2s ease forwards; pointer-events:none; }

@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes fadeOut{to{opacity:0}}

.modal{width:min(560px,92vw);background:var(--card);border:1px solid var(--ghost);border-radius:12px;transform:translateY(18px);animation:slideIn .28s ease forwards}
.modal__hd{display:flex;justify-content:space-between;align-items:center;padding:.7rem 1rem;border-bottom:1px solid var(--ghost)}
.modal__bd{padding:1rem}
@keyframes slideIn{from{transform:translateY(28px);opacity:.6}to{transform:translateY(0);opacity:1}}

.pulse{animation:pulse .8s ease-in-out 1}
@keyframes pulse{50%{transform:scale(1.06)}}

.receipt{margin-top:.6rem;padding:.6rem;border:1px dashed var(--ghost);border-radius:10px;background:transparent}
:focus-visible{outline:3px solid rgba(96,165,250,.45); outline-offset:2px}

:root.light .btn.primary{color:#06260e}
:root.light .flip .face{background:#fff}
:root.light .modal{background:#fff}